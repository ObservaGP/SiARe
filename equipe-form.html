<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cadastrar Membro — SiARe</title>
  <link rel="stylesheet" href="css/layout.css" />
</head>

<body class="with-sidebar-grid">

<aside>
  <h1>SiARe</h1>
  <p class="subtitle">Sistema de Acompanhamento de Relatórios</p>
</aside>

<main class="page-main">

<section class="section-box form-box">

  <a href="equipe.html" class="form-close" aria-label="Fechar">✕</a>

  <h3 id="formTitle">Cadastrar Membro da Equipe</h3>

  <form id="equipeForm" novalidate>

    <!-- Nome / CPF -->
    <div class="grid-2">
      <div class="form-group">
        <label for="nome">Nome *</label>
        <input
          id="nome"
          name="nome"
          type="text"
          placeholder="Fulano de Tal"
          autocomplete="name"
          required
        />
      </div>

      <div class="form-group">
        <label for="cpf">CPF *</label>
        <input
          id="cpf"
          name="cpf"
          type="text"
          placeholder="000.000.000-00"
          inputmode="numeric"
          autocomplete="off"
          required
        />
      </div>
    </div>

    <!-- Vínculo / SIAPE -->
    <div class="grid-2">
      <div class="form-group">
        <label for="vinculo">Vínculo Institucional *</label>
        <select id="vinculo" name="vinculo" required>
          <option value="">—</option>
          <option value="Docente">Docente</option>
          <option value="Técnico-Administrativo">Técnico-Administrativo</option>
          <option value="Discente">Discente</option>
          <option value="Externo">Externo</option>
        </select>
      </div>

      <div class="form-group">
        <label for="siape">SIAPE</label>
        <input
          id="siape"
          name="siape"
          type="text"
          placeholder="000000000"
          inputmode="numeric"
          autocomplete="off"
          maxlength="9"
        />
      </div>
    </div>

    <!-- Cargo / Forma -->
    <div class="grid-2">
      <div class="form-group">
        <label for="cargo">Cargo/Função no Projeto *</label>
        <select id="cargo" name="cargo" required>
          <option value="">—</option>
          <option value="Coordenador">Coordenador</option>
          <option value="Pesquisador">Pesquisador</option>
          <option value="Pesquisador Estudante">Pesquisador Estudante</option>
          <option value="Pesquisador Externo">Pesquisador Externo</option>
        </select>
      </div>

      <div class="form-group">
        <label for="forma">Forma de Vinculação *</label>
        <select id="forma" name="forma" required>
          <option value="">—</option>
          <option value="Plano de Trabalho">Plano de Trabalho</option>
          <option value="Edital">Edital</option>
        </select>
      </div>
    </div>

    <!-- Cargas Horárias -->
    <div class="grid-2">
      <div class="form-group">
        <label for="chBolsa">C.H. semanal com bolsa *</label>
        <input
          id="chBolsa"
          name="chBolsa"
          type="text"
          value="00" placeholder="00" data-example="true"
          inputmode="numeric"
          maxlength="2"
          required
        />
      </div>

      <div class="form-group">
        <label for="chSemBolsa">C.H. semanal sem bolsa *</label>
        <input
          id="chSemBolsa"
          name="chSemBolsa"
          type="text"
          value="00" placeholder="00" data-example="true"
          inputmode="numeric"
          maxlength="2"
          required
        />
      </div>
    </div>

    <!-- Datas -->
    <div class="grid-2">
      <div class="form-group">
        <label for="inicio">Data de Início *</label>
        <input id="inicio" name="inicio" type="date" required />
      </div>

      <div class="form-group">
        <label for="fim">Data de Término *</label>
        <input id="fim" name="fim" type="date" required />
      </div>
    </div>

    <!-- Bolsa (opcional) -->
    <div class="grid-2">
      <div class="form-group">
        <label for="tipoBolsa">Tipo de Bolsa</label>
        <input id="tipoBolsa" name="tipoBolsa" type="text" placeholder="Ex.: PIBIC, Embrapii, FAPES" />
      </div>

      <div class="form-group">
        <label for="valorBolsa">Valor de Bolsa</label>
        <input id="valorBolsa" name="valorBolsa" type="text" inputmode="decimal" placeholder="Ex.: 700,00" />
      </div>
    </div>

    <!-- Voluntariado / Contrapartida + Versão do vínculo -->
    <div class="grid-2">
      <div class="form-group">
        <label class="checkline">
          <input id="naoBolsista" name="naoBolsista" type="checkbox" />
          <span><strong>Não é bolsista</strong> (Voluntariado/Contrapartida)</span>
        </label>
      </div>

      <div class="form-group">
        <label for="versaoVinculo">Versão do Vínculo</label>
        <input id="versaoVinculo" name="versaoVinculo" type="text" class="ch" maxlength="2" inputmode="numeric" placeholder="00" value="00" data-example="true" />
      </div>
    </div>

    <div class="form-footer-info">
      <div>*Campos obrigatórios</div>
      <div id="saveInfo" class="right" aria-live="polite"></div>
    </div>

    <!-- Ações -->
    <div class="form-actions">
      <div class="form-actions-left">
        <button type="reset" class="btn-clear">Limpar</button>
      </div>

      <div class="form-actions-right">
        <button id="btnSubmit" type="submit" class="btn-save">Salvar</button>
      </div>
    </div>

  </form>

</section>

<div id="confirmModal" class="modal hidden" role="dialog" aria-modal="true" aria-labelledby="confirmTitle">
  <div class="modal-box">
    <p id="confirmTitle">Já existe um registro com este ID (CPF/Versão) cadastrado.<br>Deseja substituí-lo?</p>

    <div class="modal-actions">
      <button id="btnNao" class="btn-danger">Não</button>
      <button id="btnSim" class="btn-success">Sim</button>
    </div>
  </div>
</div>

</main>

<script src="js/equipe-form.js" defer></script>

<script>
  // Detector: se o arquivo externo não carregar, você vai ver isso na hora
  window.addEventListener('DOMContentLoaded', () => {
    if (!window.SIARE_FORM_LOADED) {
      const box = document.createElement('div');
      box.style.cssText =
        'margin-top:12px;padding:10px 12px;border:2px solid #b00020;border-radius:10px;' +
        'background:#fff;color:#b00020;font-weight:700;max-width:980px;width:min(980px,96vw);';
      box.textContent =
        'ERRO: equipe-form.js NÃO carregou. Verifique o caminho/capitalização em js/equipe-form.js';
      document.querySelector('main')?.appendChild(box);
    }
  });
</script>

</body>
</html>
