<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Relatórios — SiARe</title>

  <link rel="stylesheet" href="../css/layout.css" />
  <script src="../js/sidebar.js" defer></script>
</head>

<body class="with-sidebar-grid">

  <!-- ================= SIDEBAR (CARREGADO VIA JS) ================= -->
  <aside id="sidebar"></aside>

  <!-- ================= CONTEÚDO ================= -->
  <main class="page-main">

    <header class="version-toolbar">
      <div>
        <div class="h2-like">Relatórios</div>
        <div class="version-label">Atribua atividades aos membros e depois marque as atividades realizadas por mês.</div>
      </div>
    </header>

    <!-- 1) ATRIBUIÇÃO DE ATIVIDADES -->
    <section class="section-box report-box">
      <div class="section-header">
        <div>
          <h3>Atribuição de Atividades</h3>
          <div class="text-muted">Selecione membro à esquerda e atividades à direita.</div>
        </div>

        <div class="assign-header-right">
          <div id="assignTitle" class="text-muted">Atividades disponíveis para o perfil</div>

          <div style="display:flex; gap:1rem; align-items:center;">
            <div class="month-controls" aria-label="Mês da atribuição">
              <button id="btnPrevAssignMonth" class="btn-icon btn-mini" type="button" aria-label="Mês anterior">◀</button>
              <div id="assignMonthLabel" class="year-label year-pill">—</div>
              <button id="btnNextAssignMonth" class="btn-icon btn-mini" type="button" aria-label="Próximo mês">▶</button>
            </div>
            <div id="assignCounter" class="reports-counter text-muted"></div>
          </div>
        </div>
      </div>

      <div class="assign-grid">
        <!-- esquerda: membros -->
        <div class="assign-left">
          <div id="reportsMembers" class="panel-scroll members-panel members-panel-tall" aria-label="Lista de membros"></div>

          <div id="reportsMembersEmpty" class="empty-state hidden">
            Nenhum membro cadastrado. Cadastre em <strong>Equipe Executora</strong>.
          </div>
        </div>

        <!-- direita: atividades (atribuição ou mês) -->
        <div class="assign-right">
          <div class="assign-sortline" aria-label="Ordenação da lista de atividades">
            <div class="assign-sortcell col-num">
              <span class="assign-sortlabel">Nº</span>
              <button id="sortNumToggle" class="sort-toggle" type="button" data-dir="asc" aria-label="Ordenar Nº"></button>
            </div>
            <div class="assign-sortcell">
              <span class="assign-sortlabel">Atividade</span>
              <button id="sortTxtToggle" class="sort-toggle" type="button" data-dir="asc" aria-label="Ordenar Atividade"></button>
            </div>
          </div>

          <div id="reportsAssignTasks" class="panel-scroll assign-panel" aria-label="Lista de atividades"></div>

          <div id="reportsAssignEmpty" class="empty-state hidden">
            Selecione um membro para continuar.
          </div>
        </div>
      </div>
    </section>
<!-- 2) MÊS (seleção para relatórios) -->
<section class="section-box report-box">
  <div class="section-header">
    <div>
      <h3>Mês</h3>
      <div id="monthsSelectionInfo" class="text-muted">Selecione um membro acima</div>
    </div>

    <div class="year-controls">
      <button id="btnPrevYear" class="btn-icon" type="button" aria-label="Ano anterior">◀</button>
      <div id="yearLabel" class="year-label year-pill">—</div>
      <button id="btnNextYear" class="btn-icon" type="button" aria-label="Próximo ano">▶</button>
    </div>
  </div>

  <div id="reportsMonthsSelect" class="panel-scroll months-panel" aria-label="Seletor de meses"></div>
</section>

<!-- 3) PAINEL DE ATIVIDADES (atribuições por mês, no ano) -->
<section class="section-box report-box">
  <div class="section-header">
    <div>
      <h3>Painel de Atividades</h3>
      <div class="text-muted">Visão anual das atribuições por mês</div>
    </div>

    <div class="year-controls">
      <button id="btnPrevPanelYear" class="btn-icon" type="button" aria-label="Ano anterior">◀</button>
      <div id="panelYearLabel" class="year-label year-pill">—</div>
      <button id="btnNextPanelYear" class="btn-icon" type="button" aria-label="Próximo ano">▶</button>
    </div>
  </div>

  <div id="panelMonths" class="months-panel months-panel-autogrow" aria-label="Painel anual de atividades"></div>
</section>
</main>

  <script src="../js/relatorios.js" defer></script>
</body>
</html>
